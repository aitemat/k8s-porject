## 1. Cài đặt Helm
```sh
curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
sudo chmod 700 get_helm.sh
./get_helm.sh
```  
## 2. Cài đặt Longhorn version 1.5.1  
```sh
helm repo add longhorn https://charts.longhorn.io
helm repo update
helm search repo longhorn
helm pull longhorn/longhorn --version 1.5.1
tar -xzf longhorn-1.5.1.tgz
cp values.yaml /root/yaml/values-longhorn.yaml
```
Edit file `cp values.yaml /root/yaml/values-longhorn.yaml`  
Chỉnh sửa dòng nodePort:null thành nodePort: <port cần chỉnh>:  
```sh  
service:
  ui:
    #type: ClusterIP
    type: NodePort
    nodePort: 30123
  manager:
    type: ClusterIP
```
Chỉnh các dòng còn lại:  
```sh
defaultDataPath: /data/longhorn-storage/
replicaSoftAntiAffinity: true
storageMinimalAvailablePercentage: 15
upgradeChecker: false
defaultReplicaCount: 2
backupstorePollInterval: 500
nodeDownPodDeletionPolicy: do-nothing
guaranteedEngineManagerCPU: 15
guaranteedReplicaManagerCPU: 15

ingress:  
  enabled: true
  ingressClassName: longhorn-storage-ingress
  host: longhorn-ui.nhanhoa.local

namespaceOverride: "storage"
```  
##  3. Cài đặt Open-iscsi cho các Worker Node để nó có thể mount được phân vùng từ longhorn storage  
```sh
yum -y install iscsi-initiator-utils
```



