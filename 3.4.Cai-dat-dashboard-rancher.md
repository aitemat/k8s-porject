
Rancher là một trong những công cụ giúp khởi tạo Kubernetes Cluster một cách nhanh chóng và giúp quản lý, cài đặt các deployment, service một cách thuận tiện.  
# Mô hình
- 45.117.80.52 k8s-master1 : làm Master primary
- 103.101.162.200 k8s-master2: làm Slave
- 45.117.80.150 k8s-master3: làm chức năng HA - Rancher server
- 103.101.163.72 k8s-nodew1: node worker
- 103.101.162.20 k8s-nodew2: node worker  
# 1. Cài đặt và cấu hình
## 1.1. Cài đặt 
### Cài đặt docker trên k8s-master3:  
```sh
sudo apt-get update
sudo apt-get install docker.io -y
docker --version
sudo systemctl enable docker
sudo systemctl start docker
sudo systemctl status docker
```
### Tắt Swap off
`swapoff -a`
### Cài đặt Rancher
`docker run --privileged -d --restart=unless-stopped -p 8888:80 -p 8889:443 rancher/rancher` 
### Truy cập link
Nếu dùng http thì truy cập qua port `8888`, nếu https thì dùng port `8889`  
Link dạng:  
`http://<IP Rancher>:8888`  
`https://<IP Rancher>:8889`  
Truy cập link https://45.117.80.150:8889   

<img src="/images/rancher1.jpg">  

Thực hiện 2 lệnh sau đễ tạo password Rancher  
```sh
root@k8s-master3:~# docker ps
CONTAINER ID   IMAGE             COMMAND           CREATED         STATUS         PORTS                                         NAMES
80396579e5e8   rancher/rancher   "entrypoint.sh"   3 minutes ago   Up 3 minutes   0.0.0.0:8888->80/tcp, 0.0.0.0:8889->443/tcp   modest_bassi
root@k8s-master3:~# docker logs  80396579e5e8  2>&1 | grep "Bootstrap Password:"
2023/05/03 09:39:53 [INFO] Bootstrap Password: f59gm75rr8ldxvrjq65lrxdvmshmwvlfwcr2hxbtsnbfds6nt2dbhmb
root@k8s-master3:~#
```  
Sau khi có password random ta copy pass nhập vào ô password --> Chọn `Login with Local User`  

<img src="/images/rancher2.jpg"> 

Chọn mục password generated --> Check mục đồng ý điều khoản --> `Continue`  

## 1.2. Cấu hình
