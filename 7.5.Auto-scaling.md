# Auto Scaling
Kubernetes có tính năng tự động scale ứng dụng của bạn và quản lý chúng, được gọi là tự động scaling hoặc auto scaling. Tự động scaling giúp tận dụng tài nguyên của hệ thống hiệu quả hơn và đảm bảo ứng dụng của bạn đáp ứng nhu cầu của người dùng.

Có hai loại tự động scaling trên Kubernetes:

## 1. Horizontal Pod Autoscaler (HPA): tự động scale các Pod trong một Deployment, ReplicaSet, hoặc StatefulSet dựa trên CPU sử dụng, memory sử dụng, hoặc số lượng kết nối đến ứng dụng.

## 2. Vertical Pod Autoscaler (VPA): tự động scale các Container trong một Pod dựa trên yêu cầu memory và CPU sử dụng của các Container.

Để sử dụng Horizontal Pod Autoscaler, bạn có thể thực hiện các bước sau:

1. Khai báo một tài nguyên HPA trong file YAML để chỉ định các thông số scale.

2. Cấu hình hệ thống để sử dụng một bộ điều khiển lên cương lưu để theo dõi và tính toán các thông số scale (ví dụ như Heapster).

3. Cài đặt metric server (nếu chưa cài đặt) để theo dõi các metric của các Pod.

4. Kích hoạt tự động scaling cho Pod với lệnh `kubectl autoscale deployment <tên deployment> --cpu-percent=<giá trị> --min=<tối thiểu> --max=<tối đa>`

Ví dụ:

`kubectl autoscale deployment nginx-example --cpu-percent=50 --min=2 --max=5`


Trong đó, giá trị cpu-percent là giá trị phần trăm của CPU sử dụng trung bình trên một pod, min và max là giới hạn tối thiểu và tối đa số lượng Pod. Khi CPU sử dụng trung bình trên các Pod vượt qua ngưỡng này, Kubernetes sẽ tự động tạo thêm các Pod mới để đáp ứng với nhu cầu tải.

Bạn có thể sử dụng lệnh kubectl get hpa để kiểm tra trạng thái của tự động scaling của deployment.
